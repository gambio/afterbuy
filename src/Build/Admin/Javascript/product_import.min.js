"use strict";!function(){var e={},t=!0,n=document.querySelector("#btn_stop_products_import"),r=document.querySelector("#last_import_datetime"),o=function(o){var s=document.querySelector("#ab_import_progress_backdrop"),d=document.querySelector("body");o.preventDefault(),t=!0,n.removeAttribute("disabled"),r.setAttribute("disabled","disabled"),r.parentElement.classList.remove("notrunning"),r.parentElement.classList.add("running"),s.remove(),d.prepend(s),s.style.display="flex",function n(o){var s=document.querySelector("#ab_import_message"),d=document.querySelector("#ab_import_progress_bar");return window.fetch(e.importStepUrl+"&step="+o).then((function(e){return e.json()})).then((function(e){if(s.textContent=e.message,d.style.width=100*parseFloat(e.progress)+"%",""!==e.lastimportdatetime&&(r.value=e.lastimportdatetime),e.progress<1&&t)return n(o+1);e.progress>=1&&(r.removeAttribute("disabled"),r.parentElement.classList.remove("running"),r.parentElement.classList.add("notrunning"))}))}(0).then((function(){document.querySelector("#ab_import_message");setTimeout((function(){s.style.display="none"}),5e3)}))},s=function(){var r=document.querySelector("#btn_start_products_import"),s=document.querySelector("#product_import_config");null!==r&&null!==s&&(e=JSON.parse(s.textContent),r.addEventListener("click",o),null!==n&&n.addEventListener("click",(function(e){e.preventDefault(),t=!1,n.setAttribute("disabled","disabled")})))};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?s():document.addEventListener("DOMContentLoaded",s)}();